---
import MoonIcon from "./MoonIcon.astro";
import SunIcon from "./SunIcon.astro";
---

<button
    id="themeToggle"
    type="button"
    class="bg-gray-200 dark:bg-indigo-600 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2"
    role="switch"
>
    <span class="sr-only">Dark Mode Toggle</span>
    <span
        class="translate-x-0 dark:translate-x-5 pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"
    >
        <span
            class="opacity-100 dark:opacity-0 dark:duration-100 dark:ease-out duration-200 ease-in absolute inset-0 flex h-full w-full items-center justify-center transition-opacity"
            aria-hidden="true"
        >
            <SunIcon />
        </span>
        <span
            class="opacity-0 dark:opacity-100 dark:duration-200 dark:ease-in duration-100 ease-out absolute inset-0 flex h-full w-full items-center justify-center transition-opacity"
            aria-hidden="true"
        >
            <MoonIcon />
        </span>
    </span>
</button>

<script is:inline>
    const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");

        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    document
        .getElementById("themeToggle")
        .addEventListener("click", handleToggleClick);
</script>
